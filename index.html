<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ØµØ­ØªÙŠ â€” Ø§Ø³ØªØ¨ÙŠØ§Ù†</title>
  <style>
    /* --- Base --- */
    :root{
      --primary:#2c5aa0;
      --accent:#20b2aa;
      --bg:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      --card:#ffffff;
      --muted:#6b7280;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Segoe UI", Tahoma, system-ui, "Cairo", sans-serif;
      background:var(--bg);
      color:#111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:30px 16px;
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      background:transparent;
    }

    header{
      background:rgba(255,255,255,0.95);
      border-radius:12px;
      padding:14px 18px;
      box-shadow:0 6px 30px rgba(0,0,0,0.08);
      margin-bottom:18px;
    }
    header .brand{display:flex;gap:12px;align-items:center}
    header .brand .logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(45deg,var(--accent),var(--primary));display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:20px}
    header h1{font-size:20px;color:var(--primary);margin:0}

    .grid{
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:20px;
    }
    @media(max-width:980px){ .grid{ grid-template-columns:1fr } }

    /* left content */
    .panel{
      background:var(--card);
      border-radius:14px;
      padding:26px;
      box-shadow:0 18px 50px rgba(0,0,0,0.12);
      overflow:hidden;
    }
    .hero h2{margin:0 0 8px 0;color:#fff;font-size:28px}
    .hero p{color:#fff;opacity:0.95;margin:0 0 8px 0}

    .section-title{color:var(--primary);font-size:22px;margin-bottom:12px}

    /* form */
    form{display:block}
    .survey-form{
      background:linear-gradient(145deg,#ffffff,#f5f7fb);
      padding:20px;border-radius:12px;border:1px solid #e6e9ef;
    }
    .form-row{display:flex;gap:12px;margin-bottom:12px}
    .form-row.column{flex-direction:column}
    .form-group{flex:1}
    label{display:block;font-weight:600;color:var(--primary);margin-bottom:6px}
    input[type="text"], input[type="email"], input[type="tel"], select, textarea{
      width:100%; padding:10px 12px; border-radius:10px; border:1px solid #e4e7ee;
      font-size:14px; background:#fff;
    }
    input:focus, select:focus, textarea:focus{outline:none;border-color:var(--accent); box-shadow:0 6px 20px rgba(32,178,170,0.08)}
    textarea{min-height:90px; resize:vertical}

    .checkbox-group{
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
      gap:8px;
    }
    .checkbox-item{
      display:flex; gap:8px; align-items:center; padding:8px; background:#f8fafc; border-radius:8px; border:1px solid #eef2f7;
    }
    .checkbox-item input{transform:scale(1.05)}

    .submit-row{margin-top:14px}
    .submit-btn{
      width:100%; padding:12px 16px; background:linear-gradient(45deg,var(--accent),var(--primary));
      color:#fff; border:none; border-radius:12px; font-weight:700; font-size:16px; cursor:pointer;
      box-shadow:0 12px 30px rgba(44,90,160,0.16);
    }
    .submit-btn[disabled]{opacity:0.65; cursor:not-allowed; transform:none}

    .success-message{
      display:none;
      margin-top:12px;
      padding:14px;
      border-radius:10px;
      background:linear-gradient(45deg,#28a745,#20c997);
      color:white; font-weight:700; text-align:center;
      box-shadow:0 12px 30px rgba(32,167,69,0.18);
    }

    .right-panel{
      display:flex; flex-direction:column; gap:14px;
    }
    .info-card{background:var(--card); padding:18px; border-radius:12px; border:1px solid #eef2f7}
    .muted{color:var(--muted); font-size:14px}

    .field-error{color:#b91c1c;font-size:13px;margin-top:6px;display:none}

    /* small text */
    .small{font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">+</div>
        <div>
          <h1>ØµØ­ØªÙŠ â€” Ø§Ø³ØªØ¨ÙŠØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h1>
          <div class="small">Ø³Ø§Ø¹Ø¯Ù†Ø§ Ù†Ø¨Ù†ÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ùƒ â€” ØªØ¹Ø¨Ø¦Ø© Ø³Ø±ÙŠØ¹Ø© ÙˆØ¢Ù…Ù†Ø©</div>
        </div>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: FORM -->
      <div class="panel">
        <div style="background:linear-gradient(135deg,#667eea,#764ba2);padding:18px;border-radius:10px;color:#fff;margin-bottom:16px">
          <h2 style="margin:0">Ù…Ù„ÙÙƒ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ ÙÙŠ Ø¬ÙŠØ¨Ùƒ</h2>
          <p style="margin:6px 0 0">Ø´Ø§Ø±ÙƒÙ†Ø§ Ø±Ø£ÙŠÙƒ Ø¹Ø´Ø§Ù† Ù†Ø·ÙˆÙ‘Ø± Ø£ÙØ¶Ù„ Ù†Ø³Ø®Ø© ØªØ®Ø¯Ù…Ùƒ.</p>
        </div>

        <div class="section-title">Ø³Ø§Ø¹Ø¯Ù†Ø§ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</div>

        <form id="surveyForm" class="survey-form" novalidate>
          <!-- Email / WhatsApp -->
          <div class="form-row">
            <div class="form-group">
              <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ *</label>
              <input id="email" name="email" type="email" placeholder="example@mail.com" required>
              <div id="emailError" class="field-error">Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ù‹Ø§ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ‹Ø§ ØµØ§Ù„Ø­Ù‹Ø§</div>
            </div>
            <div class="form-group">
              <label for="phone">Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ *</label>
              <input id="phone" name="whatsapp" type="tel" placeholder="01xxxxxxxxx" required>
              <div id="phoneError" class="field-error">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ ØµØ­ÙŠØ­</div>
            </div>
          </div>

          <!-- Age / City -->
          <div class="form-row">
            <div class="form-group">
              <label for="age">Ø§Ù„Ø¹Ù…Ø± *</label>
              <select id="age" name="ageGroup" required>
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ø±</option>
                <option value="18-25">18-25</option>
                <option value="26-35">26-35</option>
                <option value="36-45">36-45</option>
                <option value="46-55">46-55</option>
                <option value="56+">56+</option>
              </select>
              <div id="ageError" class="field-error">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù…Ø±ÙŠØ©</div>
            </div>
            <div class="form-group">
              <label for="city">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© *</label>
              <input id="city" name="city" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©" required>
              <div id="cityError" class="field-error">Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©</div>
            </div>
          </div>

          <!-- Problems (checkboxes) -->
          <div style="margin-bottom:12px">
            <label>Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡Ù‡Ø§ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© ØµØ­ØªÙƒØŸ (Ø§Ø®ØªØ± ÙˆØ§Ø­Ø¯ Ø£Ùˆ Ø£ÙƒØ«Ø±)</label>
            <div class="checkbox-group" style="margin-top:8px">
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±"> Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù…Ù† Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</label>
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©"> ÙÙ‚Ø¯Ø§Ù† Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</label>
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="Ù†Ø³ÙŠØ§Ù† Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©"> Ù†Ø³ÙŠØ§Ù† Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¯ÙˆÙŠØ©</label>
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡"> Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡</label>
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯"> ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯</label>
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¹ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡"> Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¹ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡</label>
              <label class="checkbox-item"><input type="checkbox" name="problemsCheckbox" value="Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ©"> Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµØ­ÙŠØ©</label>
            </div>
            <div id="problemsError" class="field-error">Ø§Ø®ØªØ± Ù…Ø´ÙƒÙ„Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„</div>
          </div>

          <!-- Usage frequency / Price -->
          <div class="form-row">
            <div class="form-group">
              <label for="usage-frequency">ÙƒÙ… Ù…Ø±Ø© ØªØ²ÙˆØ± Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø´Ù‡Ø±ÙŠØ§Ù‹ØŸ</label>
              <select id="usage-frequency" name="visitFrequency">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªÙƒØ±Ø§Ø±</option>
                <option value="Ù†Ø§Ø¯Ø±Ø§Ù‹ (Ù…Ø±Ø© Ø£Ùˆ Ø£Ù‚Ù„)">Ù†Ø§Ø¯Ø±Ø§Ù‹ (Ù…Ø±Ø© Ø£Ùˆ Ø£Ù‚Ù„)</option>
                <option value="Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ (2-3 Ù…Ø±Ø§Øª)">Ø£Ø­ÙŠØ§Ù†Ø§Ù‹ (2-3 Ù…Ø±Ø§Øª)</option>
                <option value="ØºØ§Ù„Ø¨Ø§Ù‹ (4-6 Ù…Ø±Ø§Øª)">ØºØ§Ù„Ø¨Ø§Ù‹ (4-6 Ù…Ø±Ø§Øª)</option>
                <option value="ÙƒØ«ÙŠØ±Ø§Ù‹ (Ø£ÙƒØ«Ø± Ù…Ù† 6 Ù…Ø±Ø§Øª)">ÙƒØ«ÙŠØ±Ø§Ù‹ (Ø£ÙƒØ«Ø± Ù…Ù† 6 Ù…Ø±Ø§Øª)</option>
              </select>
              <div id="visitError" class="field-error">Ø§Ø®ØªØ± ØªÙƒØ±Ø§Ø± Ø§Ù„Ø²ÙŠØ§Ø±Ø©</div>
            </div>
            <div class="form-group">
              <label for="payment-willingness">ÙƒÙ… Ø³ØªÙƒÙˆÙ† Ù…Ø³ØªØ¹Ø¯Ø§Ù‹ Ù„Ø¯ÙØ¹ Ø´Ù‡Ø±ÙŠØ§Ù‹ Ù…Ù‚Ø§Ø¨Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ØŸ</label>
              <select id="payment-willingness" name="priceReadiness">
                <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø³Ø¹Ø±</option>
                <option value="Ù…Ø¬Ø§Ù†ÙŠ ÙÙ‚Ø·">Ù…Ø¬Ø§Ù†ÙŠ ÙÙ‚Ø·</option>
                <option value="1-20 Ø¬Ù†ÙŠÙ‡">1-20 Ø¬Ù†ÙŠÙ‡</option>
                <option value="21-50 Ø¬Ù†ÙŠÙ‡">21-50 Ø¬Ù†ÙŠÙ‡</option>
                <option value="51-100 Ø¬Ù†ÙŠÙ‡">51-100 Ø¬Ù†ÙŠÙ‡</option>
                <option value="Ø£ÙƒØ«Ø± Ù…Ù† 100 Ø¬Ù†ÙŠÙ‡">Ø£ÙƒØ«Ø± Ù…Ù† 100 Ø¬Ù†ÙŠÙ‡</option>
              </select>
              <div id="priceError" class="field-error">Ø§Ø®ØªØ± Ø´Ø±ÙŠØ­Ø© Ø§Ù„Ø³Ø¹Ø±</div>
            </div>
          </div>

          <!-- Suggestions -->
          <div class="form-row column">
            <div class="form-group">
              <label for="suggestions">Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ø£Ùˆ Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© ØªÙˆØ¯ Ø±Ø¤ÙŠØªÙ‡Ø§ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 1000 Ø­Ø±Ù)</label>
              <textarea id="suggestions" name="suggestions" maxlength="1000" placeholder="Ø§ÙƒØªØ¨ Ø§Ù‚ØªØ±Ø§Ø­Ùƒ..."></textarea>
              <div id="suggestionsError" class="field-error">Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­ Ø·ÙˆÙŠÙ„ Ø¬Ø¯Ø§Ù‹ (Ø£Ù‚ØµÙ‰ 1000 Ø­Ø±Ù)</div>
            </div>
          </div>

          <div class="submit-row">
            <button id="submitBtn" class="submit-btn" type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†</button>
            <div id="successMessage" class="success-message">ğŸ‰ Ø´ÙƒØ±Ø§Ù‹! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ø³ØªØ¬Ø§Ø¨ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­.</div>
          </div>
        </form>
      </div>

      <!-- RIGHT: info -->
      <div class="right-panel">
        <div class="info-card">
          <h3 style="margin:0 0 6px 0;color:var(--primary)">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø©</h3>
          <p class="muted" style="margin:0">
            Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ù…Ø­Ù„ÙŠ:
            <code>http://localhost:8086/api/leads</code>
            <br><br>
            Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø±Ø³Ù„Ø© (JSON):
            <ul style="padding-left:18px;margin:8px 0 0 0">
              <li><b>email</b> â€” String (Ù…Ø·Ù„ÙˆØ¨ØŒ ØµÙŠØºØ© email)</li>
              <li><b>whatsapp</b> â€” String (Ù…Ø·Ù„ÙˆØ¨)</li>
              <li><b>ageGroup</b> â€” String (Ù…Ø·Ù„ÙˆØ¨)</li>
              <li><b>city</b> â€” String (Ù…Ø·Ù„ÙˆØ¨)</li>
              <li><b>problems</b> â€” String (Ù…Ø·Ù„ÙˆØ¨) â€” Ù‚ÙŠÙ… Ù…ÙØµÙˆÙ„Ø© Ø¨ÙØ§ØµÙ„Ø©</li>
              <li><b>visitFrequency</b> â€” String (Ù…Ø·Ù„ÙˆØ¨)</li>
              <li><b>priceReadiness</b> â€” String (Ù…Ø·Ù„ÙˆØ¨)</li>
              <li><b>suggestions</b> â€” String (max 1000)</li>
            </ul>
          </p>
        </div>

        <div class="info-card">
          <h4 style="margin:0 0 8px 0">Ù†ØµØ§Ø¦Ø­ Ø³Ø±ÙŠØ¹Ø©</h4>
          <div class="small">
            â€¢ Ù„Ùˆ Ø¸Ù‡Ø± Ø®Ø·Ø£ CORS: ÙØ¹Ù„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª CORS ÙÙŠ Spring Boot Ø£Ùˆ Ø§Ø¶Ù @CrossOrigin Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆÙ†ØªØ±ÙˆÙ„Ø±.<br>
            â€¢ ØµÙØ­Ø© ØªØ¹Ù…Ù„ Ø¹Ø¨Ø± HTTPS Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù‡Ø§ ØªØ³ØªØ¯Ø¹ÙŠ HTTP Ù…Ø­Ù„ÙŠ â€” Ø§Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø£Ùˆ Ø¥Ø¹Ø¯Ø§Ø¯ SSL ÙÙŠ dev.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const form = document.getElementById('surveyForm');
      const submitBtn = document.getElementById('submitBtn');
      const successMessage = document.getElementById('successMessage');

      // Error elements
      const emailError = document.getElementById('emailError');
      const phoneError = document.getElementById('phoneError');
      const ageError = document.getElementById('ageError');
      const cityError = document.getElementById('cityError');
      const problemsError = document.getElementById('problemsError');
      const visitError = document.getElementById('visitError');
      const priceError = document.getElementById('priceError');
      const suggestionsError = document.getElementById('suggestionsError');

      function hideAllErrors(){
        [emailError, phoneError, ageError, cityError, problemsError, visitError, priceError, suggestionsError].forEach(el=>{
          if(el) el.style.display = 'none';
        });
      }

      function showError(el, msg){
        if(!el) return;
        el.textContent = msg || el.textContent;
        el.style.display = 'block';
      }

      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        hideAllErrors();

        // collect values
        const email = document.getElementById('email').value.trim();
        const whatsapp = document.getElementById('phone').value.trim();
        const ageGroup = document.getElementById('age').value;
        const city = document.getElementById('city').value.trim();
        const problemsChecked = Array.from(document.querySelectorAll('input[name="problemsCheckbox"]:checked')).map(i=>i.value);
        const visitFrequency = document.getElementById('usage-frequency').value;
        const priceReadiness = document.getElementById('payment-willingness').value;
        const suggestions = document.getElementById('suggestions').value.trim();

        // front-end validation (mirror backend)
        let valid = true;
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if(!email){ showError(emailError, 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨'); valid=false; }
        else if(!emailRegex.test(email)){ showError(emailError, 'Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ù‹Ø§ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠÙ‹Ø§ ØµØ§Ù„Ø­Ù‹Ø§'); valid=false; }

        if(!whatsapp){ showError(phoneError, 'Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù…Ø·Ù„ÙˆØ¨'); valid=false; }

        if(!ageGroup){ showError(ageError, 'Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¹Ù…Ø±ÙŠØ©'); valid=false; }

        if(!city){ showError(cityError, 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ù…Ø·Ù„ÙˆØ¨Ø©'); valid=false; }

        if(problemsChecked.length === 0){ showError(problemsError, 'Ø§Ø®ØªØ± Ù…Ø´ÙƒÙ„Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„'); valid=false; }

        if(!visitFrequency){ showError(visitError, 'Ø§Ø®ØªØ± ØªÙƒØ±Ø§Ø± Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨'); valid=false; }

        if(!priceReadiness){ showError(priceError, 'Ø§Ø®ØªØ± Ù…Ø¯Ù‰ Ø§Ø³ØªØ¹Ø¯Ø§Ø¯Ùƒ Ù„Ù„Ø¯ÙØ¹'); valid=false; }

        if(suggestions.length > 1000){ showError(suggestionsError, 'Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª ÙŠØ¬Ø¨ Ø£Ù„Ø§ ØªØ²ÙŠØ¯ Ø¹Ù† 1000 Ø­Ø±Ù'); valid=false; }

        if(!valid) return;

        // prepare payload (backend expects problems as String)
        const payload = {
          email: email,
          whatsapp: whatsapp,
          ageGroup: ageGroup,
          city: city,
          problems: problemsChecked.join(', '),
          visitFrequency: visitFrequency,
          priceReadiness: priceReadiness,
          suggestions: suggestions
        };

        // disable button while sending
        submitBtn.disabled = true;
        submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

        try {
          const res = await fetch('http://localhost:8086/api/leads', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
          });

          if(res.ok){
            successMessage.style.display = 'block';
            form.reset();
            // auto-hide
            setTimeout(()=> successMessage.style.display='none', 6000);
          } else {
            // try to parse error body
            let text = await res.text();
            try{
              const j = JSON.parse(text);
              text = j.message || JSON.stringify(j);
            }catch(e){}
            alert('Ø®Ø·Ø£ Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±: ' + (text || res.statusText));
          }
        } catch(err){
          console.error(err);
          alert('ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±. ØªØ£ÙƒØ¯ Ø£Ù† backend Ø´ØºÙ‘Ø§Ù„ ÙˆØ£Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª CORS ØµØ­ÙŠØ­Ø©.');
        } finally {
          submitBtn.disabled = false;
          submitBtn.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†';
        }
      });
    })();
  </script>
</body>
</html>
